import{g as h,q as P,h as k,l as U,m as V,c as g,b as a,F,d as S,t as _,s as W,o as m,p as x,v as j}from"./index-B7osa4I5.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"game-container"},K={class:"game-header"},Q={class:"difficulty-selector"},X=["onClick"],Y={class:"game-status"},Z={class:"status-box"},ee={class:"value"},se={class:"status-box"},te={class:"value"},ae={class:"board-wrapper"},ne=["onClick","onContextmenu"],le={__name:"MinesweeperGame",setup(oe){const u=h("easy"),o=h([]),v=h("ready"),M=h(0),w=h(0);let p=null;const d={easy:{rows:9,cols:9,mines:10,label:"初级"},medium:{rows:16,cols:16,mines:40,label:"中级"},hard:{rows:30,cols:30,mines:99,label:"高级"}},I=e=>{const s=d[e];return`${s.label} (${s.rows}×${s.cols})`},G=()=>{switch(v.value){case"won":return"😎";case"lost":return"😵";default:return"🙂"}};P(u,()=>{b()});const N=e=>{v.value==="playing"?confirm("当前游戏尚未结束，确定要开始新游戏吗？")&&(u.value=e):u.value=e},B=k(()=>{const{cols:e}=d[u.value];return{gridTemplateColumns:`repeat(${e}, 40px)`}}),E=k(()=>{const e=Math.floor(M.value/60),s=M.value%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}),b=()=>{const{rows:e,cols:s,mines:t}=d[u.value];o.value=Array(e).fill().map(()=>Array(s).fill().map(()=>({isMine:!1,isRevealed:!1,isFlagged:!1,neighborMines:0}))),v.value="ready",M.value=0,w.value=t,clearInterval(p)},T=(e,s)=>{const{rows:t,cols:n,mines:r}=d[u.value];let i=r;for(;i>0;){const l=Math.floor(Math.random()*t),c=Math.floor(Math.random()*n);if(!o.value[l][c].isMine&&(l!==e||c!==s)){o.value[l][c].isMine=!0,i--;for(let f=-1;f<=1;f++)for(let y=-1;y<=1;y++){const C=l+f,R=c+y;C>=0&&C<t&&R>=0&&R<n&&o.value[C][R].neighborMines++}}}},$=(e,s)=>{const t=o.value[e][s];if(!(t.isRevealed||t.isFlagged)){if(v.value==="ready"&&(v.value="playing",T(e,s),p=setInterval(()=>{M.value++},1e3)),t.isRevealed=!0,t.isMine){D();return}t.neighborMines===0&&z(e,s),L()}},z=(e,s)=>{const{rows:t,cols:n}=d[u.value];for(let r=-1;r<=1;r++)for(let i=-1;i<=1;i++){const l=e+r,c=s+i;if(l>=0&&l<t&&c>=0&&c<n){const f=o.value[l][c];!f.isRevealed&&!f.isFlagged&&$(l,c)}}},A=(e,s)=>{if(v.value!=="playing")return;const t=o.value[e][s];t.isRevealed||(t.isFlagged=!t.isFlagged,w.value+=t.isFlagged?-1:1)},D=()=>{v.value="lost",clearInterval(p),o.value.forEach(e=>{e.forEach(s=>{s.isMine&&(s.isRevealed=!0)})})},L=()=>{o.value.every(s=>s.every(t=>t.isMine?!t.isRevealed:t.isRevealed))&&(v.value="won",clearInterval(p))},q=e=>({revealed:e.isRevealed,mine:e.isRevealed&&e.isMine,flagged:e.isFlagged}),O=e=>e.isFlagged?"🚩":e.isRevealed?e.isMine?"💣":e.neighborMines||"":"";return U(()=>{b()}),V(()=>{clearInterval(p)}),(e,s)=>(m(),g("div",J,[a("div",K,[s[2]||(s[2]=a("h2",null,"扫雷",-1)),a("div",Q,[(m(),g(F,null,S(d,(t,n)=>a("button",{key:n,class:x({active:u.value===n}),onClick:r=>N(n)},_(I(n)),11,X)),64))]),a("div",Y,[a("div",Z,[s[0]||(s[0]=a("span",{class:"icon"},"💣",-1)),a("span",ee,_(w.value),1)]),a("button",{class:"restart-btn",onClick:b},_(G()),1),a("div",se,[s[1]||(s[1]=a("span",{class:"icon"},"⏱️",-1)),a("span",te,_(E.value),1)])])]),a("div",ae,[a("div",{class:"minesweeper-board",style:W(B.value)},[(m(!0),g(F,null,S(o.value,(t,n)=>(m(),g("div",{key:n,class:"row"},[(m(!0),g(F,null,S(t,(r,i)=>(m(),g("div",{key:i,class:x(["cell",q(r)]),onClick:l=>$(n,i),onContextmenu:j(l=>A(n,i),["prevent"])},_(O(r)),43,ne))),128))]))),128))],4)])]))}},ce=H(le,[["__scopeId","data-v-b5ccd168"]]);export{ce as default};
